import{S as $,i as I,s as b,e as p,c as m,b as _,a3 as A,Q as d,f as g,G as y,d as h,af as F,l as w,j as H,m as L,o as D,x as S,u as j,v as G,k as M,a as R,n as O,D as T,ag as C,w as P,A as N,r as V,ah as K}from"../chunks/vendor-2b38a6d6.js";function q(o){let e,a;return{c(){e=p("img"),this.h()},l(t){e=m(t,"IMG",{class:!0,style:!0,src:!0,alt:!0}),this.h()},h(){_(e,"class","lantern svelte-htfji2"),A(e,"left",Math.floor(Math.random()*(90-10+1))+10+"vw"),d(e.src,a="https://ipfs.infura.io/ipfs/"+o[0])||_(e,"src",a),_(e,"alt","lantern")},m(t,r){g(t,e,r)},p(t,[r]){r&1&&!d(e.src,a="https://ipfs.infura.io/ipfs/"+t[0])&&_(e,"src",a)},i:y,o:y,d(t){t&&h(e)}}}function x(o,e,a){let{ipfsHash:t}=e;return o.$$set=r=>{"ipfsHash"in r&&a(0,t=r.ipfsHash)},[t]}class J extends ${constructor(e){super();I(this,e,x,q,b,{ipfsHash:0})}}function U(){let o;const e={}.VITE_GRAFFLE_TESTNET_PROJECT_ID,a=async()=>{const t={"graffle-api-key":{}.VITE_GRAFFLE_TESTNET_API_KEY,"Content-Type":"application/x-www-form-urlencoded"},r={}.VITE_GRAFFLE_TESTNET_API_URL;return o=await fetch(r,{headers:t,method:"POST",body:{}}),o=await o.json(),o};this.stream=async t=>{let r=await a();const s=new F().withUrl(r.url,{accessTokenFactory:()=>r.accessToken}).withAutomaticReconnect().build();return s&&s.start().then(c=>{console.log("1st Parse: "+e),s.on(e,i=>{var f=JSON.parse(i);t(f)})}),s}}function E(o,e,a){const t=o.slice();return t[4]=e[a],t}function k(o,e){let a,t,r;return t=new J({props:{ipfsHash:e[0][e[4]]}}),{key:o,first:null,c(){a=w(),H(t.$$.fragment),this.h()},l(s){a=w(),L(t.$$.fragment,s),this.h()},h(){this.first=a},m(s,c){g(s,a,c),D(t,s,c),r=!0},p(s,c){e=s;const i={};c&1&&(i.ipfsHash=e[0][e[4]]),t.$set(i)},i(s){r||(S(t.$$.fragment,s),r=!0)},o(s){j(t.$$.fragment,s),r=!1},d(s){s&&h(a),G(t,s)}}}function B(o){let e,a,t,r,s=[],c=new Map,i,f=Object.keys(o[0]);const v=l=>l[4];for(let l=0;l<f.length;l+=1){let n=E(o,f,l),u=v(n);c.set(u,s[l]=k(u,n))}return{c(){e=p("div"),a=p("img"),r=M();for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=m(l,"DIV",{id:!0,class:!0});var n=R(e);a=m(n,"IMG",{class:!0,src:!0,alt:!0}),r=O(n);for(let u=0;u<s.length;u+=1)s[u].l(n);n.forEach(h),this.h()},h(){_(a,"class","island svelte-uww0j"),d(a.src,t="/island.png")||_(a,"src",t),_(a,"alt","FLOATing island"),_(e,"id","spawner"),_(e,"class","svelte-uww0j")},m(l,n){g(l,e,n),T(e,a),T(e,r);for(let u=0;u<s.length;u+=1)s[u].m(e,null);i=!0},p(l,[n]){n&1&&(f=Object.keys(l[0]),V(),s=C(s,n,v,1,l,f,c,e,K,k,null,E),P())},i(l){if(!i){for(let n=0;n<f.length;n+=1)S(s[n]);i=!0}},o(l){for(let n=0;n<s.length;n+=1)j(s[n]);i=!1},d(l){l&&h(e);for(let n=0;n<s.length;n+=1)s[n].d()}}}function Q(o,e,a){let t={};const r=(i,f)=>{a(0,t[i]=f,t),setTimeout(()=>{delete t[i],a(0,t)},5e3)},s=i=>{console.log(i),r(i.id,i.blockEventData.eventImage)},c=new U;return N(async()=>{console.log("Creating the stream"),c.stream(s)}),[t]}class z extends ${constructor(e){super();I(this,e,Q,B,b,{})}}export{z as default};
